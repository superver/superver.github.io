<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>è”šæ³ªå¿&#39;s Wiki</title>
  
  <subtitle>å¹¿æ¼‚è€ç”·å­©</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://superver.github.io/"/>
  <updated>2020-05-05T07:25:45.633Z</updated>
  <id>https://superver.github.io/</id>
  
  <author>
    <name>Gemini</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>life is long long journey</title>
    <link href="https://superver.github.io/wiki/life/%E7%94%9F%E6%B4%BB_%E6%84%9F%E6%82%9F/"/>
    <id>https://superver.github.io/wiki/life/%E7%94%9F%E6%B4%BB_%E6%84%9F%E6%82%9F/</id>
    <published>2020-05-05T06:46:10.069Z</published>
    <updated>2020-05-05T07:25:45.633Z</updated>
    
    <content type="html"><![CDATA[<ul><li>ç”Ÿæ´»æ˜¯ä¸€æ®µé•¿é•¿çš„æ—…è¡Œ</li></ul><p>ç”Ÿæ´»æ˜¯ä¸€æ®µå¥‡å¦™çš„æ—…è¡Œï¼Œæ¯ä¸€å¤„é£æ™¯éƒ½æ˜¯å›å¿† </p><p><img src="/images/about/life-1.jpg" alt="images"></p><p>å³ä½¿ä½ ä¸åœ¨æˆ‘èº«è¾¹ï¼Œæˆ‘ä¹Ÿè¦ç”¨æˆ‘çš„çœ¼ç›ï¼Œå¸®ä½ é—®å€™æ³¸æ²½æ¹–çš„æ—–æ—é£å…‰ã€‚</p><p>æ—…è¡Œä¸åœ¨ä¹ç»ˆç‚¹ï¼Œè€Œæ˜¯åœ¨æ„é€”ä¸­çš„äººå’Œäº‹ï¼Œè¿˜æœ‰é‚£äº›å®Œç¾çš„è®°å¿†å’Œæ™¯è‰²ã€‚</p><p>é’æ˜¥éšç€å¹´çºªçš„é•¿å¤§ä¸€åˆ‡éƒ½æ¸è¡Œæ¸è¿œï¼Œå……æ–¥ç€æŸ´ç±³æ²¹ç›</p><p><img src="/images/about/life-2.jpg" alt="images"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;ç”Ÿæ´»æ˜¯ä¸€æ®µé•¿é•¿çš„æ—…è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç”Ÿæ´»æ˜¯ä¸€æ®µå¥‡å¦™çš„æ—…è¡Œï¼Œæ¯ä¸€å¤„é£æ™¯éƒ½æ˜¯å›å¿† &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/about/life-1.jpg&quot; alt=&quot;images&quot;&gt;&lt;/p&gt;
&lt;p&gt;å³ä½¿ä½ ä¸åœ¨æˆ‘èº«è¾¹ï¼Œæˆ‘ä¹Ÿè¦ç”¨æˆ‘çš„çœ¼ç›ï¼Œå¸®ä½ 
      
    
    </summary>
    
    
      <category term="life" scheme="https://superver.github.io/categories/life/"/>
    
    
      <category term="life" scheme="https://superver.github.io/tags/life/"/>
    
  </entry>
  
  <entry>
    <title>nginxæ¨¡å—é…ç½®</title>
    <link href="https://superver.github.io/wiki/blog/nginx/nginx_php-fpm_%E9%85%8D%E7%BD%AE/"/>
    <id>https://superver.github.io/wiki/blog/nginx/nginx_php-fpm_%E9%85%8D%E7%BD%AE/</id>
    <published>2020-05-05T06:02:56.652Z</published>
    <updated>2020-05-05T06:45:03.395Z</updated>
    
    <content type="html"><![CDATA[<ul><li>serveré…ç½®<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">loction.\&#123;</span><br><span class="line">    fast_cgi_param : inclue fast-params;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;serveré…ç½®&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;
      
    
    </summary>
    
    
      <category term="blog" scheme="https://superver.github.io/categories/blog/"/>
    
      <category term="nginx" scheme="https://superver.github.io/categories/blog/nginx/"/>
    
    
      <category term="nginx" scheme="https://superver.github.io/tags/nginx/"/>
    
      <category term="linux" scheme="https://superver.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>php_å¸¸ç”¨å‡½æ•°</title>
    <link href="https://superver.github.io/wiki/blog/php/php_%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"/>
    <id>https://superver.github.io/wiki/blog/php/php_%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/</id>
    <published>2020-05-05T05:57:22.091Z</published>
    <updated>2020-05-05T07:01:48.498Z</updated>
    
    <content type="html"><![CDATA[<ul><li>æ‰©å±•å‡½æ•°å¸¸<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array_coloumn($arr,$index,$key);</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>phpå¸¸ç”¨ç®—æ³•-å†’æ³¡</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">BubbleSort</span><span class="params">($arr)</span></span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(<span class="keyword">empty</span>($arr) || count($arr)&lt;=<span class="number">1</span> ) <span class="keyword">return</span> $arr;</span><br><span class="line">   </span><br><span class="line">   $count = count($arr);</span><br><span class="line">   $jmax     = $count <span class="number">-1</span>;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">for</span>($i=<span class="number">0</span>;$i&lt;$count,$i++)&#123;</span><br><span class="line">       <span class="keyword">for</span>($j=$i;$j&lt;$jmax;$j++)&#123;</span><br><span class="line">           <span class="keyword">if</span>($arr[$j]&gt;$arr[$i])&#123;</span><br><span class="line">              <span class="comment">//äº¤æ¢ä½ç½® </span></span><br><span class="line">              $tmp = $arr[$j];</span><br><span class="line">              $arr[$j] = $arr[$i];</span><br><span class="line">              $arr[$i] = $tmp; </span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">return</span> $arr;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>phpå¸¸ç”¨ç®—æ³•-å¿«é€Ÿ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span><span class="params">($arr)</span></span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(<span class="keyword">empty</span>($arr) || count($arr)&lt;=<span class="number">1</span> ) <span class="keyword">return</span> $arr;</span><br><span class="line">   </span><br><span class="line">   $mid =$arr[<span class="number">0</span>];</span><br><span class="line">   $len =count($arr);</span><br><span class="line">   </span><br><span class="line">   $right = $left = [];</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">for</span>($i=<span class="number">0</span>;$i&lt;$arr;$i++)&#123;</span><br><span class="line">       <span class="keyword">if</span>($arr[$i]&gt;$mid)&#123;</span><br><span class="line">          $right[] = $arr[$i];</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           $left[] = $arr[$i];</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   $right = quickSort($right);</span><br><span class="line">   $left  = quickSort($left);</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">return</span> array_merge($right,<span class="keyword">array</span>($mid),$right);   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;æ‰©å±•å‡½æ•°å¸¸&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;p
      
    
    </summary>
    
    
      <category term="blog" scheme="https://superver.github.io/categories/blog/"/>
    
      <category term="php" scheme="https://superver.github.io/categories/blog/php/"/>
    
    
      <category term="php" scheme="https://superver.github.io/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>ã€å»ºå¼ºã€‘wiki é›†åˆ</title>
    <link href="https://superver.github.io/wiki/index/"/>
    <id>https://superver.github.io/wiki/index/</id>
    <published>2020-05-05T04:10:59.939Z</published>
    <updated>2020-05-05T06:43:54.660Z</updated>
    
    <content type="html"><![CDATA[<h2 id="blog"><a href="#blog" class="headerlink" title="@blog"></a>@<a href="https://github.com/jianqiangsong/payment"><code>blog</code></a></h2><p>phpç‰ˆèšåˆæ”¯ä»˜</p><h2 id="blog-1"><a href="#blog-1" class="headerlink" title="@blog"></a>@<a href="https://github.com/jianqiangsong/yii-important"><code>blog</code></a></h2><p>Yiiæ¡†æ¶å¹²è´§é›†åˆ</p><h2 id="blog-2"><a href="#blog-2" class="headerlink" title="@blog"></a>@<a href="https://github.com/jianqiangsong/easy-tips"><code>blog</code></a></h2><p>phpçŸ¥è¯†ç‚¹é›†åˆ ğŸ˜</p><ul><li><a href="http://easy-tips.tigerb.cn"><code>A little Tips in my Code Career with PHP ğŸ˜</code></a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;blog&quot;&gt;&lt;a href=&quot;#blog&quot; class=&quot;headerlink&quot; title=&quot;@blog&quot;&gt;&lt;/a&gt;@&lt;a href=&quot;https://github.com/jianqiangsong/payment&quot;&gt;&lt;code&gt;blog&lt;/code&gt;&lt;/a&gt;
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>php_å¼•ç”¨è®¡æ•°ä¸gc</title>
    <link href="https://superver.github.io/wiki/blog/php/php_%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E4%B8%8EGC/"/>
    <id>https://superver.github.io/wiki/blog/php/php_%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E4%B8%8EGC/</id>
    <published>2020-01-10T13:28:59.000Z</published>
    <updated>2020-05-05T04:10:59.208Z</updated>
    
    <content type="html"><![CDATA[<p>è¿›è¡Œphpæ‰©å±•å¼€å‘çš„æ—¶å€™ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå°±æ˜¯phpç”¨æˆ·æ€ç©ºé—´å°†å˜é‡ä¼ é€’åˆ°æ‰©å±•å±‚é¢<code>cå±‚è°ƒç”¨</code>çš„æ—¶å€™ï¼Œä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œä¸‹é¢çš„ä¾‹å­æ˜¯ä¸€ä¸ªtimerå®šæ—¶å™¨çš„ä¾‹å­ã€‚<br>ç”¨æˆ·ç©ºé—´ä¼šä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°ç»™<code>timeræ‰©å±•æ¥å£</code>ï¼Œé‚£ä¹ˆå®é™…å›è°ƒå‡½æ•°è¢«è°ƒç”¨çš„åœ°æ–¹æ˜¯<code>cå±‚</code>ã€‚ä½†æ˜¯è¯¥å›è°ƒå‡½æ•°å˜é‡æœ¬èº«æ˜¯ç”±ç”¨æˆ·ç©ºé—´<code>ç”³è¯·</code>å¹¶äº¤ç”±php<code>å†…æ ¸gcç®¡ç†</code>çš„ï¼Œ<br>å¦‚æœæ‰©å±•å‡½æ•°å†…ä¸åšä»»ä½•æ“ä½œï¼Œé‚£ä¹ˆå½“åˆ‡æ¢åˆ°ç”¨æˆ·ç©ºé—´æ—¶phpå†…æ ¸ä¼šåˆ¤æ–­è¯¥å˜é‡<code>éœ€è¦å›æ”¶</code>ï¼Œç„¶åæ‰©å±•å‡½æ•°å°±ä¼šç©ºæŒ‡é’ˆå¼‚å¸¸ç­‰</p><p>å½“æ‰©å±•å‡½æ•°å†…è¯¥phpå˜é‡ç”Ÿå‘½å‘¨æœŸä½¿ç”¨ç»“æŸåï¼Œä»»ç„¶éœ€è¦è€ƒè™‘<code>åƒåœ¾å›æ”¶</code>çš„é—®é¢˜ï¼Œå¹¶ä¸æ˜¯åœ¨æ‰©å±•å‡½æ•°å†…ç®€å•<code>free(data)</code>å°±å¯ä»¥çš„ï¼Œéœ€è¦è°ƒç”¨phpå†…æ ¸å¼•ç”¨è®¡æ•°æ¥å£ç­‰<br>è¿›è¡Œå˜é‡çš„å›æ”¶ä»¥åŠgcç­‰ï¼Œæœ€åäº¤ç”±phpå†…æ ¸gcç®¡ç†ã€‚å½“ç„¶æ‰©å±•å‡½æ•°å†…ç”±cè‡ªè¡Œç”³è¯·ç®¡ç†çš„å†…å­˜å¯ä»¥è‡ªå·±é‡Šæ”¾</p><ul><li>æ‰©å±•å‡½æ•°å®šä¹‰ç¤ºä¾‹<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">PHP_METHOD(timer_obj,tick)</span><br><span class="line">&#123;</span><br><span class="line">    php_lib_timer_callback *fci = (php_lib_timer_callback *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(php_lib_timer_callback));</span><br><span class="line">    <span class="comment">//å¼ºåˆ¶ä¼ å…¥ä¸¤ä¸ªå‚æ•°</span></span><br><span class="line">    ZEND_PARSE_PARAMETERS_START(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">    Z_PARAM_LONG(fci-&gt;seconds)</span><br><span class="line">    Z_PARAM_FUNC(fci-&gt;fci,fci-&gt;fcc)</span><br><span class="line">    ZEND_PARSE_PARAMETERS_END_EX(RETURN_FALSE);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> id = create_time_event(fci-&gt;seconds,tick,fci,del);</span><br><span class="line">    zend_fci_cache_persist(&amp;fci-&gt;fcc);</span><br><span class="line">    RETURN_LONG(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>æ‰©å±•å‡½æ•°å†…æ‰§è¡Œphpç”¨æˆ·æ€å›è°ƒå‡½æ•°ç¤ºä¾‹<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">tick</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> id,<span class="keyword">void</span> *data)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    php_lib_timer_callback *fci = (php_lib_timer_callback *)data;</span><br><span class="line">    zval result;</span><br><span class="line">    fci-&gt;fci.retval = &amp;result;</span><br><span class="line">    <span class="keyword">if</span>(zend_call_function(&amp;fci-&gt;fci,&amp;fci-&gt;fcc) != SUCCESS)&#123;</span><br><span class="line">        <span class="keyword">return</span> NOMORE;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fci-&gt;seconds;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="timer-ä¸­å¯¹å›è°ƒå‡½æ•°å˜é‡è¿›è¡Œå¼•ç”¨è®¡æ•°-1"><a href="#timer-ä¸­å¯¹å›è°ƒå‡½æ•°å˜é‡è¿›è¡Œå¼•ç”¨è®¡æ•°-1" class="headerlink" title="timer ä¸­å¯¹å›è°ƒå‡½æ•°å˜é‡è¿›è¡Œå¼•ç”¨è®¡æ•°+1"></a>timer ä¸­å¯¹å›è°ƒå‡½æ•°å˜é‡è¿›è¡Œå¼•ç”¨è®¡æ•°+1</h2>ä¸Šé¢ä¼šå‘ç°timer::tick()å‡½æ•°åœ¨è¿”å›ç»™ç”¨æˆ·ç©ºé—´æ—¶ä¼šåšä¸€ä¸ªæ“ä½œ<code>zend_fci_cache_persist(&amp;fci-&gt;fcc);</code>ï¼Œæ­£æ˜¯è¯¥è°ƒç”¨<br>å¯¹ä¼ å…¥çš„å›è°ƒå‡½æ•°è¿›è¡Œé¥®ç”¨è®¡æ•°ç®¡ç†ï¼Œ<code>å‘Šè¯‰phpå†…æ ¸è¯¥å›è°ƒå‡½æ•°åœ¨cå±‚ä¼šç»§ç»­ä½¿ç”¨ä¸ç”¨å›æ”¶</code>ã€‚ä»£ç å¦‚ä¸‹<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">zend_fci_cache_persist</span><span class="params">(zend_fcall_info_cache *fci_cache)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (fci_cache-&gt;object)</span><br><span class="line">    &#123;</span><br><span class="line">        GC_ADDREF(fci_cache-&gt;object);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (fci_cache-&gt;function_handler-&gt;op_array.fn_flags &amp; ZEND_ACC_CLOSURE)</span><br><span class="line">    &#123;</span><br><span class="line">        GC_ADDREF(ZEND_CLOSURE_OBJECT(fci_cache-&gt;function_handler));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>å…¶ä¸­<code>GC_ADDREFï¼ˆï¼‰</code>å‡½æ•°å¾ˆæ˜æ˜¾å°±æ˜¯å†…æ ¸GCç›¸å…³çš„apiã€‚<code>fci_cache-&gt;function_handler</code> åˆ™ä¸ºç”¨æˆ·ä¼ é€’çš„å›è°ƒå‡½æ•°çœŸæ­£çš„å˜é‡åœ°å€</p><p>å¦‚ä¸Šå‰å¥åå°±å¯ä»¥åœ¨cæ‰©å±•ä¸­æ”¾å¿ƒçš„å¯¹ç”¨æˆ·ä¼ é€’çš„å˜é‡è¿›è¡Œæ“ä½œäº†</p><h2 id="timer-ä¸­ç»“æŸåå˜é‡çš„Gcå›æ”¶"><a href="#timer-ä¸­ç»“æŸåå˜é‡çš„Gcå›æ”¶" class="headerlink" title="timer ä¸­ç»“æŸåå˜é‡çš„Gcå›æ”¶"></a>timer ä¸­ç»“æŸåå˜é‡çš„Gcå›æ”¶</h2><p>ä¸Šé¢æœ‰çœ‹åˆ°<code>php_lib_timer_callback</code>å˜é‡å®é™…æ˜¯è‡ªå·±å®šä¹‰çš„ç»“æ„ä½“ï¼ŒåŒ…æ‹¬å†…å­˜ä¹Ÿæ˜¯æœ‰å¼€å‘è€…è‡ªå·±åˆ†é…çš„ï¼Œå¯ä»¥æ”¾å¿ƒçš„<code>free</code>ã€‚ä½†æ˜¯è¯¥ç»“æ„ä½“ä¸­<br>æŒ‡å‘çš„<code>fci.fcc</code> åˆ™å®é™…æ˜¯phpç”¨æˆ·ç©ºé—´ç”³è¯·çš„å˜é‡ï¼Œä¸èƒ½ç›´æ¥<code>free</code>,å¦‚æœç›´æ¥freeï¼Œä¼šå¼•å‘php gcæ³„æ¼ï¼Œå¦‚ä¸‹è­¦å‘Šæ‰€ç¤º:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; php timer.php</span><br><span class="line">/php/src/Zend/zend_closures.c(<span class="number">459</span>) :  Freeing <span class="number">0x00007fc084e6d480</span> (<span class="number">304</span> bytes), script=/timer.php</span><br><span class="line">=== Total <span class="number">1</span> memory leaks detected ===</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ä¾ç„¶éœ€è¦æ ¹æ®phpå†…æ ¸GCçš„ç®¡ç†æ–¹å¼æ¥å¤„ç†ç”¨æˆ·ç©ºé—´çš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯æ¨¡æ‹Ÿç”¨æˆ·ç©ºé—´é‚£æ ·å¯¹å˜é‡çš„ç®¡ç†ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">zend_fci_cache_discard</span><span class="params">(zend_fcall_info_cache *fci_cache)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (fci_cache-&gt;object) &#123;</span><br><span class="line">        OBJ_RELEASE(fci_cache-&gt;object);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (fci_cache-&gt;function_handler-&gt;op_array.fn_flags &amp; ZEND_ACC_CLOSURE) &#123;</span><br><span class="line">        OBJ_RELEASE(ZEND_CLOSURE_OBJECT(fci_cache-&gt;function_handler));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">zend_fci_params_discard</span><span class="params">(zend_fcall_info *fci)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (fci-&gt;param_count &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">uint32_t</span> i;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; fci-&gt;param_count; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            zval_ptr_dtor(&amp;fci-&gt;params[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        efree(fci-&gt;params);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸éœ€è¦ä½¿ç”¨çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦å¯¹å›è°ƒå‡½æ•°æœ¬èº«è¿›è¡Œå‡å¼•ç”¨ï¼Œä»¥åŠå›è°ƒå‡½æ•°å†…çš„ç”¨æˆ·æ€çš„å‚æ•°è¿›è¡Œå‡å¼•ç”¨ä»¥åŠå˜é‡çš„å›æ”¶ã€‚åªæœ‰åšå®Œä¸Šé¢è¿™äº›åŸºæœ¬çš„ç®¡ç†æ‰èƒ½<br>å¼€å‘ä¸€ä¸ªå®‰å…¨çš„æ‰©å±•å‡½æ•°</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ€»ä¹‹ç”¨æˆ·ç©ºé—´ç”³è¯·çš„å˜é‡ä¼ é€’ç»™æ‰©å±•å†…å‡½æ•°ä½¿ç”¨ï¼Œå¦‚æœåœ¨è¿”å›ç»™ç”¨æˆ·ç©ºé—´åä¾ç„¶ä¼šç»§ç»­ä½¿ç”¨å°±è¦zval_copyæˆ–è€…å¼•ç”¨è®¡æ•°+1,å› ä¸ºåœ¨è¿”å›ç»™ç”¨æˆ·ç©ºé—´çš„æ—¶å€™æœ¬èº«ç”¨æˆ·ç©ºé—´gcä¼šåˆ¤æ–­è¯¥å˜é‡æ˜¯å¦æœ‰ç»§ç»­å¼•ç”¨ï¼Œå¦åˆ™å°±<code>refcount -= 1</code>ï¼Œç”¨æˆ·ç©ºé—´å›æ”¶è¯¥å˜é‡ï¼Œä½†æ˜¯æ‰©å±•å‡½æ•°å†…ä¾ç„¶åœ¨è®¿é—®è¯¥å·²ç»è¢«é”€æ¯çš„å˜é‡ã€‚å°±ä¼šå¯¼è‡´é”™è¯¯</p><p>åªæœ‰å°†è¿™äº›å˜é‡çš„å¼•ç”¨ä¸å›æ”¶åšå¥½äº†æ‰èƒ½å¼€å‘å‡ºå®‰å…¨å¯é çš„æ‰©å±•å‡½æ•°</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;è¿›è¡Œphpæ‰©å±•å¼€å‘çš„æ—¶å€™ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå°±æ˜¯phpç”¨æˆ·æ€ç©ºé—´å°†å˜é‡ä¼ é€’åˆ°æ‰©å±•å±‚é¢&lt;code&gt;cå±‚è°ƒç”¨&lt;/code&gt;çš„æ—¶å€™ï¼Œä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œä¸‹é¢çš„ä¾‹å­æ˜¯ä¸€ä¸ªtimerå®šæ—¶å™¨çš„ä¾‹å­ã€‚&lt;br&gt;ç”¨æˆ·ç©ºé—´ä¼šä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°ç»™&lt;code&gt;timeræ‰©å±•æ¥å£&lt;/code&gt;ï¼Œé‚£ä¹ˆå®é™…å›è°ƒå‡½
      
    
    </summary>
    
    
      <category term="blog" scheme="https://superver.github.io/categories/blog/"/>
    
      <category term="php" scheme="https://superver.github.io/categories/blog/php/"/>
    
    
      <category term="linux" scheme="https://superver.github.io/tags/linux/"/>
    
      <category term="php" scheme="https://superver.github.io/tags/php/"/>
    
      <category term="c" scheme="https://superver.github.io/tags/c/"/>
    
      <category term="ext" scheme="https://superver.github.io/tags/ext/"/>
    
      <category term="refrerence" scheme="https://superver.github.io/tags/refrerence/"/>
    
      <category term="gc" scheme="https://superver.github.io/tags/gc/"/>
    
  </entry>
  
</feed>
