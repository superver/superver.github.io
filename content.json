{"pages":[{"title":"","date":"2020-05-05T04:29:22.309Z","path":"/404.html","text":"Error 404 Not Found - æ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨~"},{"title":"Categories","date":"2020-05-05T04:10:58.936Z","path":"categories/index.html","text":""},{"title":"About","date":"2020-05-05T07:25:17.194Z","path":"about/index.html","text":"å…³äºæˆ‘è‡ªå·± 2018å¹´æ–°åŠ å¡ å…³äºç¼–ç¨‹ ä¸“æ³¨ä¸šåŠ¡,é’ˆå¯¹å®é™…åœºæ™¯ å…´è¶£çˆ±å¥½æ—…è¡Œã€ç¯®çƒã€éŸ³ä¹ã€ ä¸€å¥è¯ åŠªåŠ›æ‰æœ‰å›æŠ¥ é‡å¤§äº‹ä»¶ 2019å¹´æ˜¥èŠ‚ æˆ‘ç»“å©šäº†"},{"title":"Tags","date":"2020-05-05T04:10:59.084Z","path":"tags/index.html","text":""}],"posts":[{"title":"life is long long journey","date":"2020-05-05T06:46:10.069Z","path":"wiki/life/ç”Ÿæ´»_æ„Ÿæ‚Ÿ/","text":"ç”Ÿæ´»æ˜¯ä¸€æ®µé•¿é•¿çš„æ—…è¡Œ ç”Ÿæ´»æ˜¯ä¸€æ®µå¥‡å¦™çš„æ—…è¡Œï¼Œæ¯ä¸€å¤„é£æ™¯éƒ½æ˜¯å›å¿† å³ä½¿ä½ ä¸åœ¨æˆ‘èº«è¾¹ï¼Œæˆ‘ä¹Ÿè¦ç”¨æˆ‘çš„çœ¼ç›ï¼Œå¸®ä½ é—®å€™æ³¸æ²½æ¹–çš„æ—–æ—é£å…‰ã€‚ æ—…è¡Œä¸åœ¨ä¹ç»ˆç‚¹ï¼Œè€Œæ˜¯åœ¨æ„é€”ä¸­çš„äººå’Œäº‹ï¼Œè¿˜æœ‰é‚£äº›å®Œç¾çš„è®°å¿†å’Œæ™¯è‰²ã€‚ é’æ˜¥éšç€å¹´çºªçš„é•¿å¤§ä¸€åˆ‡éƒ½æ¸è¡Œæ¸è¿œï¼Œå……æ–¥ç€æŸ´ç±³æ²¹ç›","tags":[{"name":"life","slug":"life","permalink":"https://superver.github.io/tags/life/"}],"categories":[{"name":"life","slug":"life","permalink":"https://superver.github.io/categories/life/"}]},{"title":"nginxæ¨¡å—é…ç½®","date":"2020-05-05T06:02:56.652Z","path":"wiki/blog/nginx/nginx_php-fpm_é…ç½®/","text":"serveré…ç½®123loction.\\&#123; fast_cgi_param : inclue fast-params;&#125;","tags":[{"name":"nginx","slug":"nginx","permalink":"https://superver.github.io/tags/nginx/"},{"name":"linux","slug":"linux","permalink":"https://superver.github.io/tags/linux/"}],"categories":[{"name":"blog","slug":"blog","permalink":"https://superver.github.io/categories/blog/"},{"name":"nginx","slug":"blog/nginx","permalink":"https://superver.github.io/categories/blog/nginx/"}]},{"title":"php_å¸¸ç”¨å‡½æ•°","date":"2020-05-05T05:57:22.091Z","path":"wiki/blog/php/php_å¸¸ç”¨å‡½æ•°/","text":"æ‰©å±•å‡½æ•°å¸¸1array_coloumn($arr,$index,$key); phpå¸¸ç”¨ç®—æ³•-å†’æ³¡ 12345678910111213141516171819function BubbleSort($arr)&#123; if(empty($arr) || count($arr)&lt;=1 ) return $arr; $count = count($arr); $jmax = $count -1; for($i=0;$i&lt;$count,$i++)&#123; for($j=$i;$j&lt;$jmax;$j++)&#123; if($arr[$j]&gt;$arr[$i])&#123; //äº¤æ¢ä½ç½® $tmp = $arr[$j]; $arr[$j] = $arr[$i]; $arr[$i] = $tmp; &#125; &#125; &#125; return $arr; &#125; phpå¸¸ç”¨ç®—æ³•-å¿«é€Ÿ 123456789101112131415161718192021function quickSort($arr)&#123; if(empty($arr) || count($arr)&lt;=1 ) return $arr; $mid =$arr[0]; $len =count($arr); $right = $left = []; for($i=0;$i&lt;$arr;$i++)&#123; if($arr[$i]&gt;$mid)&#123; $right[] = $arr[$i]; &#125;else&#123; $left[] = $arr[$i]; &#125; &#125; $right = quickSort($right); $left = quickSort($left); return array_merge($right,array($mid),$right); &#125;","tags":[{"name":"php","slug":"php","permalink":"https://superver.github.io/tags/php/"}],"categories":[{"name":"blog","slug":"blog","permalink":"https://superver.github.io/categories/blog/"},{"name":"php","slug":"blog/php","permalink":"https://superver.github.io/categories/blog/php/"}]},{"title":"ã€å»ºå¼ºã€‘wiki é›†åˆ","date":"2020-05-05T04:10:59.939Z","path":"wiki/index/","text":"@blogphpç‰ˆèšåˆæ”¯ä»˜ @blogYiiæ¡†æ¶å¹²è´§é›†åˆ @blogphpçŸ¥è¯†ç‚¹é›†åˆ ğŸ˜ A little Tips in my Code Career with PHP ğŸ˜","tags":[],"categories":[]},{"title":"php_å¼•ç”¨è®¡æ•°ä¸gc","date":"2020-01-10T13:28:59.000Z","path":"wiki/blog/php/php_å¼•ç”¨è®¡æ•°ä¸GC/","text":"è¿›è¡Œphpæ‰©å±•å¼€å‘çš„æ—¶å€™ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå°±æ˜¯phpç”¨æˆ·æ€ç©ºé—´å°†å˜é‡ä¼ é€’åˆ°æ‰©å±•å±‚é¢cå±‚è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œä¸‹é¢çš„ä¾‹å­æ˜¯ä¸€ä¸ªtimerå®šæ—¶å™¨çš„ä¾‹å­ã€‚ç”¨æˆ·ç©ºé—´ä¼šä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°ç»™timeræ‰©å±•æ¥å£ï¼Œé‚£ä¹ˆå®é™…å›è°ƒå‡½æ•°è¢«è°ƒç”¨çš„åœ°æ–¹æ˜¯cå±‚ã€‚ä½†æ˜¯è¯¥å›è°ƒå‡½æ•°å˜é‡æœ¬èº«æ˜¯ç”±ç”¨æˆ·ç©ºé—´ç”³è¯·å¹¶äº¤ç”±phpå†…æ ¸gcç®¡ç†çš„ï¼Œå¦‚æœæ‰©å±•å‡½æ•°å†…ä¸åšä»»ä½•æ“ä½œï¼Œé‚£ä¹ˆå½“åˆ‡æ¢åˆ°ç”¨æˆ·ç©ºé—´æ—¶phpå†…æ ¸ä¼šåˆ¤æ–­è¯¥å˜é‡éœ€è¦å›æ”¶ï¼Œç„¶åæ‰©å±•å‡½æ•°å°±ä¼šç©ºæŒ‡é’ˆå¼‚å¸¸ç­‰ å½“æ‰©å±•å‡½æ•°å†…è¯¥phpå˜é‡ç”Ÿå‘½å‘¨æœŸä½¿ç”¨ç»“æŸåï¼Œä»»ç„¶éœ€è¦è€ƒè™‘åƒåœ¾å›æ”¶çš„é—®é¢˜ï¼Œå¹¶ä¸æ˜¯åœ¨æ‰©å±•å‡½æ•°å†…ç®€å•free(data)å°±å¯ä»¥çš„ï¼Œéœ€è¦è°ƒç”¨phpå†…æ ¸å¼•ç”¨è®¡æ•°æ¥å£ç­‰è¿›è¡Œå˜é‡çš„å›æ”¶ä»¥åŠgcç­‰ï¼Œæœ€åäº¤ç”±phpå†…æ ¸gcç®¡ç†ã€‚å½“ç„¶æ‰©å±•å‡½æ•°å†…ç”±cè‡ªè¡Œç”³è¯·ç®¡ç†çš„å†…å­˜å¯ä»¥è‡ªå·±é‡Šæ”¾ æ‰©å±•å‡½æ•°å®šä¹‰ç¤ºä¾‹12345678910111213PHP_METHOD(timer_obj,tick)&#123; php_lib_timer_callback *fci = (php_lib_timer_callback *)malloc(sizeof(php_lib_timer_callback)); //å¼ºåˆ¶ä¼ å…¥ä¸¤ä¸ªå‚æ•° ZEND_PARSE_PARAMETERS_START(2, 2) Z_PARAM_LONG(fci-&gt;seconds) Z_PARAM_FUNC(fci-&gt;fci,fci-&gt;fcc) ZEND_PARSE_PARAMETERS_END_EX(RETURN_FALSE); long id = create_time_event(fci-&gt;seconds,tick,fci,del); zend_fci_cache_persist(&amp;fci-&gt;fcc); RETURN_LONG(id);&#125; æ‰©å±•å‡½æ•°å†…æ‰§è¡Œphpç”¨æˆ·æ€å›è°ƒå‡½æ•°ç¤ºä¾‹12345678910int tick(long long id,void *data)&#123; php_lib_timer_callback *fci = (php_lib_timer_callback *)data; zval result; fci-&gt;fci.retval = &amp;result; if(zend_call_function(&amp;fci-&gt;fci,&amp;fci-&gt;fcc) != SUCCESS)&#123; return NOMORE; &#125; return fci-&gt;seconds;&#125; timer ä¸­å¯¹å›è°ƒå‡½æ•°å˜é‡è¿›è¡Œå¼•ç”¨è®¡æ•°+1ä¸Šé¢ä¼šå‘ç°timer::tick()å‡½æ•°åœ¨è¿”å›ç»™ç”¨æˆ·ç©ºé—´æ—¶ä¼šåšä¸€ä¸ªæ“ä½œzend_fci_cache_persist(&amp;fci-&gt;fcc);ï¼Œæ­£æ˜¯è¯¥è°ƒç”¨å¯¹ä¼ å…¥çš„å›è°ƒå‡½æ•°è¿›è¡Œé¥®ç”¨è®¡æ•°ç®¡ç†ï¼Œå‘Šè¯‰phpå†…æ ¸è¯¥å›è°ƒå‡½æ•°åœ¨cå±‚ä¼šç»§ç»­ä½¿ç”¨ä¸ç”¨å›æ”¶ã€‚ä»£ç å¦‚ä¸‹1234567891011static void zend_fci_cache_persist(zend_fcall_info_cache *fci_cache)&#123; if (fci_cache-&gt;object) &#123; GC_ADDREF(fci_cache-&gt;object); &#125; if (fci_cache-&gt;function_handler-&gt;op_array.fn_flags &amp; ZEND_ACC_CLOSURE) &#123; GC_ADDREF(ZEND_CLOSURE_OBJECT(fci_cache-&gt;function_handler)); &#125;&#125; å…¶ä¸­GC_ADDREFï¼ˆï¼‰å‡½æ•°å¾ˆæ˜æ˜¾å°±æ˜¯å†…æ ¸GCç›¸å…³çš„apiã€‚fci_cache-&gt;function_handler åˆ™ä¸ºç”¨æˆ·ä¼ é€’çš„å›è°ƒå‡½æ•°çœŸæ­£çš„å˜é‡åœ°å€ å¦‚ä¸Šå‰å¥åå°±å¯ä»¥åœ¨cæ‰©å±•ä¸­æ”¾å¿ƒçš„å¯¹ç”¨æˆ·ä¼ é€’çš„å˜é‡è¿›è¡Œæ“ä½œäº† timer ä¸­ç»“æŸåå˜é‡çš„Gcå›æ”¶ä¸Šé¢æœ‰çœ‹åˆ°php_lib_timer_callbackå˜é‡å®é™…æ˜¯è‡ªå·±å®šä¹‰çš„ç»“æ„ä½“ï¼ŒåŒ…æ‹¬å†…å­˜ä¹Ÿæ˜¯æœ‰å¼€å‘è€…è‡ªå·±åˆ†é…çš„ï¼Œå¯ä»¥æ”¾å¿ƒçš„freeã€‚ä½†æ˜¯è¯¥ç»“æ„ä½“ä¸­æŒ‡å‘çš„fci.fcc åˆ™å®é™…æ˜¯phpç”¨æˆ·ç©ºé—´ç”³è¯·çš„å˜é‡ï¼Œä¸èƒ½ç›´æ¥free,å¦‚æœç›´æ¥freeï¼Œä¼šå¼•å‘php gcæ³„æ¼ï¼Œå¦‚ä¸‹è­¦å‘Šæ‰€ç¤º: 123&gt; php timer.php/php/src/Zend/zend_closures.c(459) : Freeing 0x00007fc084e6d480 (304 bytes), script=/timer.php=== Total 1 memory leaks detected === æ‰€ä»¥ä¾ç„¶éœ€è¦æ ¹æ®phpå†…æ ¸GCçš„ç®¡ç†æ–¹å¼æ¥å¤„ç†ç”¨æˆ·ç©ºé—´çš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯æ¨¡æ‹Ÿç”¨æˆ·ç©ºé—´é‚£æ ·å¯¹å˜é‡çš„ç®¡ç†ï¼š 12345678910111213141516171819202122static void zend_fci_cache_discard(zend_fcall_info_cache *fci_cache)&#123; if (fci_cache-&gt;object) &#123; OBJ_RELEASE(fci_cache-&gt;object); &#125; if (fci_cache-&gt;function_handler-&gt;op_array.fn_flags &amp; ZEND_ACC_CLOSURE) &#123; OBJ_RELEASE(ZEND_CLOSURE_OBJECT(fci_cache-&gt;function_handler)); &#125;&#125;static void zend_fci_params_discard(zend_fcall_info *fci)&#123; if (fci-&gt;param_count &gt; 0) &#123; uint32_t i; for (i = 0; i &lt; fci-&gt;param_count; i++) &#123; zval_ptr_dtor(&amp;fci-&gt;params[i]); &#125; efree(fci-&gt;params); &#125;&#125; åœ¨ä¸éœ€è¦ä½¿ç”¨çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦å¯¹å›è°ƒå‡½æ•°æœ¬èº«è¿›è¡Œå‡å¼•ç”¨ï¼Œä»¥åŠå›è°ƒå‡½æ•°å†…çš„ç”¨æˆ·æ€çš„å‚æ•°è¿›è¡Œå‡å¼•ç”¨ä»¥åŠå˜é‡çš„å›æ”¶ã€‚åªæœ‰åšå®Œä¸Šé¢è¿™äº›åŸºæœ¬çš„ç®¡ç†æ‰èƒ½å¼€å‘ä¸€ä¸ªå®‰å…¨çš„æ‰©å±•å‡½æ•° æ€»ç»“æ€»ä¹‹ç”¨æˆ·ç©ºé—´ç”³è¯·çš„å˜é‡ä¼ é€’ç»™æ‰©å±•å†…å‡½æ•°ä½¿ç”¨ï¼Œå¦‚æœåœ¨è¿”å›ç»™ç”¨æˆ·ç©ºé—´åä¾ç„¶ä¼šç»§ç»­ä½¿ç”¨å°±è¦zval_copyæˆ–è€…å¼•ç”¨è®¡æ•°+1,å› ä¸ºåœ¨è¿”å›ç»™ç”¨æˆ·ç©ºé—´çš„æ—¶å€™æœ¬èº«ç”¨æˆ·ç©ºé—´gcä¼šåˆ¤æ–­è¯¥å˜é‡æ˜¯å¦æœ‰ç»§ç»­å¼•ç”¨ï¼Œå¦åˆ™å°±refcount -= 1ï¼Œç”¨æˆ·ç©ºé—´å›æ”¶è¯¥å˜é‡ï¼Œä½†æ˜¯æ‰©å±•å‡½æ•°å†…ä¾ç„¶åœ¨è®¿é—®è¯¥å·²ç»è¢«é”€æ¯çš„å˜é‡ã€‚å°±ä¼šå¯¼è‡´é”™è¯¯ åªæœ‰å°†è¿™äº›å˜é‡çš„å¼•ç”¨ä¸å›æ”¶åšå¥½äº†æ‰èƒ½å¼€å‘å‡ºå®‰å…¨å¯é çš„æ‰©å±•å‡½æ•°","tags":[{"name":"linux","slug":"linux","permalink":"https://superver.github.io/tags/linux/"},{"name":"php","slug":"php","permalink":"https://superver.github.io/tags/php/"},{"name":"c","slug":"c","permalink":"https://superver.github.io/tags/c/"},{"name":"ext","slug":"ext","permalink":"https://superver.github.io/tags/ext/"},{"name":"refrerence","slug":"refrerence","permalink":"https://superver.github.io/tags/refrerence/"},{"name":"gc","slug":"gc","permalink":"https://superver.github.io/tags/gc/"}],"categories":[{"name":"blog","slug":"blog","permalink":"https://superver.github.io/categories/blog/"},{"name":"php","slug":"blog/php","permalink":"https://superver.github.io/categories/blog/php/"}]}],"categories":[{"name":"life","slug":"life","permalink":"https://superver.github.io/categories/life/"},{"name":"blog","slug":"blog","permalink":"https://superver.github.io/categories/blog/"},{"name":"nginx","slug":"blog/nginx","permalink":"https://superver.github.io/categories/blog/nginx/"},{"name":"php","slug":"blog/php","permalink":"https://superver.github.io/categories/blog/php/"}],"tags":[{"name":"life","slug":"life","permalink":"https://superver.github.io/tags/life/"},{"name":"nginx","slug":"nginx","permalink":"https://superver.github.io/tags/nginx/"},{"name":"linux","slug":"linux","permalink":"https://superver.github.io/tags/linux/"},{"name":"php","slug":"php","permalink":"https://superver.github.io/tags/php/"},{"name":"c","slug":"c","permalink":"https://superver.github.io/tags/c/"},{"name":"ext","slug":"ext","permalink":"https://superver.github.io/tags/ext/"},{"name":"refrerence","slug":"refrerence","permalink":"https://superver.github.io/tags/refrerence/"},{"name":"gc","slug":"gc","permalink":"https://superver.github.io/tags/gc/"}]}